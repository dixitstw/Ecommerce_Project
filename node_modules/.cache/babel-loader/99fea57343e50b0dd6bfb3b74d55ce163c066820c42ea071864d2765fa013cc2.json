{"ast":null,"code":"import _slicedToArray from\"/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Swal from'sweetalert2';import{changeRole,getUserList,isAuthenticated}from'../../../api/userAPI';import Navbar from'../../Navbar';import AdminSidebar from'./AdminSidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Users=function Users(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _isAuthenticated=isAuthenticated(),token=_isAuthenticated.token;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];useEffect(function(){getUserList().then(function(data){if(data.error){console.log(data.error);}else setUsers(data);});},[success]);var handleRole=function handleRole(id){return function(e){e.preventDefault();setSuccess(false);changeRole(id,token).then(function(data){if(data.error){console.log(data.error);Swal.fire(\"Error\",data.error,\"error\");}else{setSuccess(true);console.log(data.message);Swal.fire(\"Success\",\"Change role successfully\",\"success\");}});};};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 col-sm-6\",children:/*#__PURE__*/_jsx(AdminSidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9 col-sm-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-success text-decoration-underline pt-3\",children:\"Users List\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"S.No.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Verified\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users&&users.map(function(user,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role?\"admin\":\"client\"}),/*#__PURE__*/_jsx(\"td\",{children:user.isVerified?\"Verified\":\"Unverified\"}),/*#__PURE__*/_jsx(\"td\",{children:user.role?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn danger\",onClick:handleRole(user._id),children:\"\\\"Remove Admin\\\"\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn info\",onClick:handleRole(user._id),children:\"\\\"Make Admin\\\"\"})})]},user._id);})})]})]})]})})]});};export default Users;","map":{"version":3,"names":["React","useEffect","useState","Swal","changeRole","getUserList","isAuthenticated","Navbar","AdminSidebar","Users","users","setUsers","token","success","setSuccess","then","data","error","console","log","handleRole","id","e","preventDefault","fire","message","map","user","i","username","email","role","isVerified","_id"],"sources":["/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/src/Components/Layout/Pages/Admin/Users.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Swal from 'sweetalert2'\nimport { changeRole, getUserList, isAuthenticated } from '../../../api/userAPI'\nimport Navbar from '../../Navbar'\nimport AdminSidebar from './AdminSidebar'\n\nconst Users = () => {\n    const [users, setUsers] = useState([])\n    const {token} = isAuthenticated()\n\n    const [success, setSuccess] = useState(false)\n\n\n    useEffect(()=> {\n        getUserList()\n        .then(data=> {\n            if(data.error) {\n                console.log(data.error)\n            }\n            else setUsers(data)\n        })\n\n    }, [success])\n\n    const handleRole = id => e => {\n        e.preventDefault()\n        setSuccess(false)\n        changeRole(id, token)\n        .then(data => {\n            if(data.error) {\n                console.log(data.error)\n                Swal.fire(\"Error\",data.error, \"error\")\n            }\n            else {\n                setSuccess(true)\n                console.log(data.message)\n                Swal.fire(\"Success\", \"Change role successfully\", \"success\")\n            }\n        })\n    }\n\n\n  return (\n    <>\n    <Navbar/>\n   <div className=\"container-fluid\">\n    <div className=\"row\">\n      <div className=\"col-md-3 col-sm-6\">\n      <AdminSidebar/>\n      </div>\n      <div className=\"col-md-9 col-sm-6\">\n        <h3 className = 'text-success text-decoration-underline pt-3'>Users List</h3>\n        <table className = 'table table-hover text-center'>\n        <thead>\n            <tr>\n                <td>S.No.</td>\n                <td>Username</td>\n                <td>Email</td>\n                <td>Verified</td>\n                <td>Action</td>\n            </tr>\n        </thead>\n        <tbody>\n            {\n            users && users.map((user, i)=> {\n                return <tr key = {user._id}>\n                    <td>{i+1}</td>\n                    <td>{user.username}</td>\n                    <td>{user.email}</td>\n                    <td>{user.role?\"admin\":\"client\"}</td>\n                    <td>{user.isVerified?\"Verified\": \"Unverified\"}</td>\n                    <td>\n                       {user.role? \n                       <button className = \"btn btn danger\" onClick = {handleRole(user._id)}>\"Remove Admin\"</button>:\n                        <button className = \"btn btn info\" onClick = {handleRole(user._id)}>\"Make Admin\"</button>}\n                    </td>\n\n                </tr>\n            })\n}\n        </tbody>\n        </table>\n      </div>\n\n    </div>\n   </div>\n    </>\n  )\n}\n\nexport default Users"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}