{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import Swal from'sweetalert2';import{API}from'../../../../config';import{emptyCart,remove_from_cart,updateCart}from'../../../reducer/cartActions';import{REMOVE_FROM_CART}from'../../../reducer/cartConstants';import Footer from'../../Footer';import Navbar from'../../Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(){var cart_items=useSelector(function(state){return state.cart.cart_items;});var dispatch=useDispatch();var cart_totals=cart_items===null||cart_items===void 0?void 0:cart_items.map(function(item){return item.product_price*item.quantity;});var total_amount=cart_totals.length>0&&cart_totals.reduce(function(a,b){return a+b;});sessionStorage.setItem('total',total_amount);var emptyTheCart=function emptyTheCart(){Swal.fire({title:\"Alert\",text:\"Are you sure you want to clear the cart?\",icon:\"question\",showCancelButton:\"true\"}).then(function(result){if(result.isConfirmed){dispatch(emptyCart());}});};var increaseQuantity=function increaseQuantity(item){return function(e){e.preventDefault();//item.quantity++\nif(item.quantity==item.count_in_stock){Swal.fire('Warning','Maximum quantity reached.','error');}else{item.quantity++;dispatch(updateCart(item));}};};var decreaseQuantity=function decreaseQuantity(item){return function(e){e.preventDefault();if(item.quantity===1){Swal.fire('Warning','Cannot decrease quantity','error');}else{item.quantity--;dispatch(updateCart(item));}};};var removeFromCart=function removeFromCart(id){return function(e){e.preventDefault();Swal.fire({title:\"Alert\",text:\"Are you sure you want to remove this item from cart?\",icon:\"question\",showCancelButton:\"true\"}).then(function(result){if(result.isConfirmed){dispatch(remove_from_cart(id));}});};};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-decoration-underline text-center mb-3\",children:\"Cart Items\"}),cart_items.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"table text-cener table-hover alighn-middle table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-dark\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"S.No.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Prodct Image\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Total Price\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Action\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[cart_items&&cart_items.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API,\"/\").concat(item.product_image),alt:item.product_name,style:{height:\"100px \"}})}),/*#__PURE__*/_jsx(\"td\",{children:item.product_name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs. \",item.product_price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-2 btn btn-warning\",onClick:decreaseQuantity(item),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-2\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 btn btn-success\",onClick:increaseQuantity(item),children:\"+\"})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs. \",item.quantity*item.product_price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:removeFromCart(item._id),children:\"Remove\"})})]},item._id);}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:5,className:\"text-end\",children:\"Cart Total: \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs.\",total_amount]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:emptyTheCart,children:\"Empty Cart\"})})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"text-end\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-info\",to:\"/checkout\",children:\"Proceed to Checkout.\"})})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger w-50 m-auto\",children:\"No Items in Cart\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Cart;","map":{"version":3,"names":["React","useDispatch","useSelector","Link","Swal","API","emptyCart","remove_from_cart","updateCart","REMOVE_FROM_CART","Footer","Navbar","Cart","cart_items","state","cart","dispatch","cart_totals","map","item","product_price","quantity","total_amount","length","reduce","a","b","sessionStorage","setItem","emptyTheCart","fire","title","text","icon","showCancelButton","then","result","isConfirmed","increaseQuantity","e","preventDefault","count_in_stock","decreaseQuantity","removeFromCart","id","i","product_image","product_name","height","_id"],"sources":["/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/src/Components/Layout/Pages/user/Cart.jsx"],"sourcesContent":["import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport Swal from 'sweetalert2'\nimport { API } from '../../../../config'\nimport { emptyCart, remove_from_cart, updateCart } from '../../../reducer/cartActions'\nimport { REMOVE_FROM_CART } from '../../../reducer/cartConstants'\nimport Footer from '../../Footer'\nimport Navbar from '../../Navbar'\n\nconst Cart = () => {\n  const cart_items = useSelector(state=> state.cart.cart_items )\n  const dispatch = useDispatch()\n\n  const cart_totals = cart_items?.map(item=> item.product_price * item.quantity)\n  const total_amount =  cart_totals.length>0 && cart_totals.reduce((a, b)=> a + b)\n  \n  sessionStorage.setItem('total', total_amount)\n\n  const emptyTheCart = () =>{\n    Swal.fire({\n      title: \"Alert\",\n      text:  \"Are you sure you want to clear the cart?\",\n      icon: \"question\",\n      showCancelButton: \"true\"})\n    .then(result=> {\n      if(result.isConfirmed){\n        dispatch(emptyCart())\n\n      }\n    })\n     \n  }\n\n  const increaseQuantity = (item) => e => {\n    e.preventDefault()\n    //item.quantity++\n   if(item.quantity==item.count_in_stock){\n      Swal.fire('Warning', 'Maximum quantity reached.', 'error')\n    }\n    else {\n      item.quantity++\n      dispatch(updateCart(item))\n\n    }\n  }\n\n  const decreaseQuantity = (item) => e => {\n    e.preventDefault()\n    if(item.quantity===1){\n      Swal.fire('Warning', 'Cannot decrease quantity', 'error')\n    }\n    else {\n      item.quantity--\n      dispatch(updateCart(item))\n\n    }\n  }\n\n  const removeFromCart = (id) => e => {\n    e.preventDefault()\n    Swal.fire({\n      title: \"Alert\",\n      text:  \"Are you sure you want to remove this item from cart?\",\n      icon: \"question\",\n      showCancelButton: \"true\"})\n    .then(result=> {\n      if(result.isConfirmed){\n        dispatch(remove_from_cart(id))\n\n      }\n    })\n  }\n\n  return (\n    <>\n    <Navbar/>\n    <div className=\"container-fluid mt-5\">\n      <h3 className = 'text-decoration-underline text-center mb-3'>Cart Items</h3>\n      {cart_items.length > 0 ?\n      <table className ='table text-cener table-hover alighn-middle table-bordered'>\n        <thead>\n          <tr className ='table-dark'>\n            <td>S.No.</td>\n            <td>Prodct Image</td>\n            <td>Product Name</td>\n            <td>Unit Price</td>\n            <td>Quantity</td>\n            <td>Total Price</td>\n            <td>Action</td>\n            </tr>\n\n        </thead>\n\n        <tbody>\n          {\n            cart_items && cart_items.map((item, i)=> {\n              return <tr key = {item._id}>\n                <td>{i + 1}</td>\n                <td>\n                  <img src= {`${API}/${item.product_image}`} alt ={item.product_name} style = {{height: \"100px \"}}/>\n                </td>\n                <td>{item.product_name}</td>\n                <td>Rs. {item.product_price}</td>\n                \n                <td>\n                  <div className = 'btn-group'>\n                    <button className = 'px-2 btn btn-warning' onClick = {decreaseQuantity(item)}>-</button>\n                \n                  <span className = 'px-3 py-2'>\n                  {item.quantity}\n                  </span>\n                  <button className = 'px-2 btn btn-success' onClick ={increaseQuantity(item)}>+</button>\n                  </div>\n                  </td>\n\n\n                <td>Rs. {item.quantity * item.product_price}</td>\n               <td>\n                 <button className ='btn btn-danger' onClick ={removeFromCart(item._id)}>Remove</button>\n                 </td>\n              </tr>\n            })\n          }\n          <tr>\n            <td colSpan ={5} className ='text-end'>Cart Total: </td>\n            <td>Rs.{total_amount}</td>\n            <td>\n              <button className = 'btn btn-danger' onClick = {emptyTheCart}>Empty Cart</button>\n            </td>\n          </tr>\n\n          <tr>\n            <td colSpan ={7} className = 'text-end'>\n              <Link className = 'btn btn-info' to='/checkout'>Proceed to Checkout.</Link>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      :\n      <div className = 'alert alert-danger w-50 m-auto'>No Items in Cart</div>\n}\n    </div>\n    <Footer/>\n    </>\n  )\n}\n\nexport default Cart"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}