{"ast":null,"code":"import _slicedToArray from\"/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useReducer,useState}from'react';import{getAllCategories}from'../../../api/categoryAPI';import{addProduct}from'../../../api/productAPI';import{isAuthenticated}from'../../../api/userAPI';import Navbar from'../../Navbar';import AdminCategories from'./AdminCategories';import AdminSidebar from'./AdminSidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddProduct=function AddProduct(){var productReducer=function productReducer(state,action){if(action.target.name=\"product_image\"){return _objectSpread(_objectSpread({},state),{},_defineProperty({},action.target.name,action.target.files[0]));}else{return _objectSpread(_objectSpread({},state),{},_defineProperty({},action.target.name,action.target.value));}};var _useReducer=useReducer(productReducer,{formdata:new FormData()}),_useReducer2=_slicedToArray(_useReducer,2),product=_useReducer2[0],setProduct=_useReducer2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var token=isAuthenticated;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];useEffect(function(){getAllCategories().then(function(data){if(data.error){console.log(data.error);}else{setCategories(data);}});},[]);//console.log(formdata)\nvar handleSubmit=function handleSubmit(e){e.preventDefault();addProduct(product.formdata,token).then(function(data){if(data.error){setError(data.error);setSuccess(false);}else{setSuccess(true);setError('');}});};var showError=function showError(){if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-alert-danger\",children:error});}};var showSuccess=function showSuccess(){if(success){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-alert-success\",children:\"Product added successfully.\"});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 col-sm-6\",children:/*#__PURE__*/_jsx(AdminSidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9 col-sm-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-success text-decoration-underline pt-3\",children:\"Add new product.\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"w-50 px-5 pt-3 pb-5 p-5 my-3 shadow-lg text-decoration-underline\",children:[showError(),showSuccess(),/*#__PURE__*/_jsx(\"h3\",{children:\"Product Details\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"product_name\",onChange:setProduct}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Product Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"product_price\",onChange:setProduct}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Product Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",name:\"product_description\",onChange:setProduct}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Count in stock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",name:\"count_in_stock\",onChange:setProduct}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Product Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",name:\"product_image\",onChange:setProduct}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",id:\"\",className:\"form-control\",onChange:setProduct,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Category\"}),categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category._id,children:category.category_name},category._id);})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning mt-2 w-100\",onClick:handleSubmit,children:\"Add Product\"})]})]})]})})]});};export default AddProduct;","map":{"version":3,"names":["React","useEffect","useReducer","useState","getAllCategories","addProduct","isAuthenticated","Navbar","AdminCategories","AdminSidebar","AddProduct","productReducer","state","action","target","name","files","value","formdata","FormData","product","setProduct","categories","setCategories","token","error","setError","success","setSuccess","then","data","console","log","handleSubmit","e","preventDefault","showError","showSuccess","map","category","_id","category_name"],"sources":["/home/dipti/Codes/Dursikshya 1-2/REACT/Ecommerce_React_main/src/Components/Layout/Pages/Admin/AddProduct.jsx"],"sourcesContent":["import React, { useEffect, useReducer, useState } from 'react'\nimport { getAllCategories } from '../../../api/categoryAPI'\nimport { addProduct } from '../../../api/productAPI'\nimport { isAuthenticated } from '../../../api/userAPI'\nimport Navbar from '../../Navbar'\nimport AdminCategories from './AdminCategories'\nimport AdminSidebar from './AdminSidebar'\n\nconst AddProduct = () => {\n\n    const productReducer = (state, action) => {\n      if(action.target.name = \"product_image\") {\n        return {...state, [action.target.name]: action.target.files[0]}\n      } else {\n        return {...state, [action.target.name]:action.target.value}\n\n      }\n    }\n\n    const [product, setProduct] = useReducer(productReducer, {formdata: new FormData})\n    const[categories, setCategories] = useState([])\n    const token = isAuthenticated\n\n    let [error, setError] = useState('')\n    let [success, setSuccess] = useState(false)\n\n    useEffect(() => {\n      getAllCategories()\n      .then(data => {\n        if(data.error) {\n          console.log(data.error)\n         }\n        else {\n          setCategories(data)\n        }\n      })\n    }, [])\n\n\n\n    //console.log(formdata)\n\n    const handleSubmit = e => {\n      e.preventDefault()\n      addProduct(product.formdata, token)\n      .then(data => {\n        if(data.error) {\n          setError(data.error)\n          setSuccess(false)\n        }\n        else {\n          setSuccess(true)\n          setError('')\n        }\n      })\n    }\n\n    const showError = () => {\n      if(error) {\n        return <div className = 'alert-alert-danger'>{error}</div>\n      }\n    }\n\n    const showSuccess = () => {\n      if(success) {\n        return <div className = 'alert-alert-success'>Product added successfully.</div>\n      } \n    }    \n  return (\n    <>\n     <Navbar/>\n   <div className=\"container-fluid\">\n    <div className=\"row\">\n      <div className=\"col-md-3 col-sm-6\">\n      <AdminSidebar/>\n      </div>\n      <div className=\"col-md-9 col-sm-6\">\n        <h3 className = 'text-success text-decoration-underline pt-3'>Add new product.</h3>\n\n    <form className = 'w-50 px-5 pt-3 pb-5 p-5 my-3 shadow-lg text-decoration-underline'>\n      {showError()}\n      {showSuccess()}\n      <h3>Product Details</h3>\n        <label htmlFor = \"product_name\">Product Name</label>\n        <input type = \"text\" className = 'form-control' name = 'product_name' onChange = {setProduct}/>\n\n        <label htmlFor = \"product_name\">Product Price</label>\n        <input type = \"text\" className = 'form-control' name = 'product_price' onChange = {setProduct}/>\n\n        <label htmlFor = \"product_name\">Product Description</label>\n        <textarea type = \"text\" className = 'form-control' name = 'product_description' onChange = {setProduct}/>\n\n        <label htmlFor = \"product_name\">Count in stock</label>\n        <input type = \"number\" className = 'form-control' name = 'count_in_stock' onChange = {setProduct}/>\n\n        <label htmlFor = \"product_name\">Product Image</label>\n        <input type = \"file\" className = 'form-control' name = 'product_image' onChange = {setProduct}/>\n\n        <label htmlFor = \"product_name\">Category</label>\n        <select name = \"category\" id = \"\" className = 'form-control' onChange = {setProduct}>\n          <option value=\"\">Choose Category</option>\n          {\n            categories.map(category => {\n              return <option value = {category._id} key={category._id}>{category.category_name}</option>\n            })\n          }\n        </select>\n\n        <button className = \"btn btn-warning mt-2 w-100\" onClick = {handleSubmit}>Add Product</button>\n    </form>\n\n      </div>\n\n    </div>\n   </div>\n    </>\n  )\n}\n\nexport default AddProduct"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}